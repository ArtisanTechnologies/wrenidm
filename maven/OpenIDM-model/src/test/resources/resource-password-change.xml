<?xml version="1.0" encoding="UTF-8"?>
<c:object xmlns:c="http://openidm.forgerock.com/xml/ns/public/common/common-1.xsd"
xmlns:i="http://openidm.forgerock.com/xml/ns/public/common/common-1.xsd"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:type="c:ResourceType"
oid="aaaaaaaa-76e0-48e2-86d6-3d4f02d3e1a2">
    <c:name>opendj</c:name>
    <c:type>http://openidm.forgerock.com/xml/ns/public/resource/idconnector/resourceaccessconfiguration-1.xsd</c:type>
    <c:namespace>http://openidm.forgerock.com/xml/ns/public/resource/instances/aaaaaaaa-76e0-48e2-86d6-3d4f02d3e1a2</c:namespace>
    <c:configuration>
        <ns2:ConnectorConfiguration xmlns:ns2="http://openidm.forgerock.com/xml/ns/public/resource/idconnector/configuration-1.xsd">
            <ns2:ConnectorRef bundleName="org.identityconnectors.ldap" bundleVersion="1.0.5531" connectorName="org.identityconnectors.ldap.LdapConnector">
                <ns2:ConnectorHostRef>/configuration/connectorHost[@oid='1234']/configuration</ns2:ConnectorHostRef>
            </ns2:ConnectorRef>
            <ns2:BundleProperties>
                <iccldap:port xmlns:iccldap="http://openidm.forgerock.com/xml/ns/resource/idconnector/bundle/org.identityconnectors.ldap/org.identityconnectors.ldap.LdapConnector/1.0.5531">10389</iccldap:port>
                <iccldap:host xmlns:iccldap="http://openidm.forgerock.com/xml/ns/resource/idconnector/bundle/org.identityconnectors.ldap/org.identityconnectors.ldap.LdapConnector/1.0.5531">localhost</iccldap:host>
                <iccldap:baseContexts xmlns:iccldap="http://openidm.forgerock.com/xml/ns/resource/idconnector/bundle/org.identityconnectors.ldap/org.identityconnectors.ldap.LdapConnector/1.0.5531">dc=forgerock,dc=org</iccldap:baseContexts>
                <iccldap:principal xmlns:iccldap="http://openidm.forgerock.com/xml/ns/resource/idconnector/bundle/org.identityconnectors.ldap/org.identityconnectors.ldap.LdapConnector/1.0.5531">cn=directory manager</iccldap:principal>
                <iccldap:credentials xmlns:iccldap="http://openidm.forgerock.com/xml/ns/resource/idconnector/bundle/org.identityconnectors.ldap/org.identityconnectors.ldap.LdapConnector/1.0.5531">password</iccldap:credentials>
                <iccldap:vlvSortAttribute xmlns:iccldap="http://openidm.forgerock.com/xml/ns/resource/idconnector/bundle/org.identityconnectors.ldap/org.identityconnectors.ldap.LdapConnector/1.0.5531">uid</iccldap:vlvSortAttribute>
            </ns2:BundleProperties>
            <ns2:PoolConfigOption minEvictTimeMillis="120000" minIdle="1" maxIdle="10" maxObjects="10" maxWait="150000"/>
            <ns2:OperationTimeouts>
                <ns2:OperationTimeout name="create" timeout="-1"/>
                <ns2:OperationTimeout name="update" timeout="-1"/>
                <ns2:OperationTimeout name="delete" timeout="-1"/>
                <ns2:OperationTimeout name="test" timeout="-1"/>
                <ns2:OperationTimeout name="scriptOnConnector" timeout="-1"/>
                <ns2:OperationTimeout name="scriptOnResource" timeout="-1"/>
                <ns2:OperationTimeout name="get" timeout="-1"/>
                <ns2:OperationTimeout name="authenticate" timeout="-1"/>
                <ns2:OperationTimeout name="search" timeout="-1"/>
                <ns2:OperationTimeout name="validate" timeout="-1"/>
                <ns2:OperationTimeout name="sync" timeout="-1"/>
                <ns2:OperationTimeout name="schema" timeout="-1"/>
            </ns2:OperationTimeouts>
        </ns2:ConnectorConfiguration>
    </c:configuration>
    <c:schema>
        <xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified"
targetNamespace="http://openidm.forgerock.com/xml/ns/public/resource/instances/aaaaaaaa-76e0-48e2-86d6-3d4f02d3e1a2"
 xmlns:c="http://openidm.forgerock.com/xml/ns/public/common/common-1.xsd"
xmlns:xns0="http://openidm.forgerock.com/xml/ns/public/resource/instances/aaaaaaaa-76e0-48e2-86d6-3d4f02d3e1a2"
xmlns:xns1="http://openidm.forgerock.com/xml/ns/public/resource/idconnector/resource-schema-1.xsd">
            <xsd:import namespace="http://openidm.forgerock.com/xml/ns/public/resource/idconnector/resource-schema-1.xsd"/>
            <xsd:import namespace="http://openidm.forgerock.com/xml/ns/public/common/common-1.xsd"/>
            <xsd:import namespace="http://openidm.forgerock.com/xml/ns/public/resource/resource-schema-1.xsd"/>
            <xsd:complexType name="Account">
                <xsd:annotation>
                    <xsd:appinfo>
                        <r:identifier xmlns:r="http://openidm.forgerock.com/xml/ns/public/resource/resource-schema-1.xsd" ref="xns1:__UID__"/>
                        <r:secondaryIdentifier xmlns:r="http://openidm.forgerock.com/xml/ns/public/resource/resource-schema-1.xsd" ref="xns1:__NAME__"/>
                        <r:compositeIdentifier xmlns:r="http://openidm.forgerock.com/xml/ns/public/resource/resource-schema-1.xsd" ref="xns0:sn"/>
                        <r:displayName xmlns:r="http://openidm.forgerock.com/xml/ns/public/resource/resource-schema-1.xsd" ref="xns0:description"/>
                        <r:descriptionAttribute xmlns:r="http://openidm.forgerock.com/xml/ns/public/resource/resource-schema-1.xsd" ref="xns0:description"/>
                        <r:nativeObjectClass xmlns:r="http://openidm.forgerock.com/xml/ns/public/resource/resource-schema-1.xsd">__ACCOUNT__</r:nativeObjectClass>
                        <r:accountType default="true" xmlns:r="http://openidm.forgerock.com/xml/ns/public/resource/resource-schema-1.xsd"/>
                    </xsd:appinfo>
                </xsd:annotation>
                <xsd:complexContent>
                    <xsd:extension base="r:ResourceObjectClass" xmlns:r="http://openidm.forgerock.com/xml/ns/public/resource/resource-schema-1.xsd">
                        <xsd:sequence>
                            <xsd:element ref="xns1:__NAME__">
                                <xsd:annotation>
                                    <xsd:appinfo>
                                        <r:nativeAttributeName xmlns:r="http://openidm.forgerock.com/xml/ns/public/resource/resource-schema-1.xsd">__NAME__</r:nativeAttributeName>
                                        <r:attributeDisplayName>Some custom name</r:attributeDisplayName>
                                    </xsd:appinfo>
                                </xsd:annotation>
                            </xsd:element>
                            <xsd:element minOccurs="0" name="description" type="xsd:string">
                                <xsd:annotation>
                                    <xsd:appinfo>
                                        <r:help xmlns:r="http://openidm.forgerock.com/xml/ns/public/resource/resource-schema-1.xsd">DESCRIPTION_NAME_HELP_KEY</r:help>
                                        <r:nativeAttributeName xmlns:r="http://openidm.forgerock.com/xml/ns/public/resource/resource-schema-1.xsd">description</r:nativeAttributeName>
                                    </xsd:appinfo>
                                </xsd:annotation>
                            </xsd:element>
                            <xsd:element ref="xns1:__PASSWORD__">
                                <xsd:annotation>
                                    <xsd:appinfo>
                                        <r:attributeFlag xmlns:r="http://openidm.forgerock.com/xml/ns/public/resource/resource-schema-1.xsd">PASSWORD</r:attributeFlag>
                                        <r:classifiedAttribute xmlns:r="http://openidm.forgerock.com/xml/ns/public/resource/resource-schema-1.xsd">
                                            <r:encryption>HASH</r:encryption>
                                            <r:classificationLevel>password</r:classificationLevel>
                                        </r:classifiedAttribute>
                                        <r:nativeAttributeName xmlns:r="http://openidm.forgerock.com/xml/ns/public/resource/resource-schema-1.xsd">__PASSWORD__</r:nativeAttributeName>
                                    </xsd:appinfo>
                                </xsd:annotation>
                            </xsd:element>
                            <xsd:element name="sn" type="xsd:string">
                                <xsd:annotation>
                                    <xsd:appinfo>
                                        <r:nativeAttributeName xmlns:r="http://openidm.forgerock.com/xml/ns/public/resource/resource-schema-1.xsd">sn</r:nativeAttributeName>
                                    </xsd:appinfo>
                                </xsd:annotation>
                            </xsd:element>
                            <xsd:element name="cn" type="xsd:string">
                                <xsd:annotation>
                                    <xsd:appinfo>
                                        <r:nativeAttributeName xmlns:r="http://openidm.forgerock.com/xml/ns/public/resource/resource-schema-1.xsd">cn</r:nativeAttributeName>
                                    </xsd:appinfo>
                                </xsd:annotation>
                            </xsd:element>
                            <xsd:element maxOccurs="unbounded" minOccurs="0" name="groups" type="xsd:string">
                                <xsd:annotation>
                                    <xsd:appinfo>
                                        <r:nativeAttributeName xmlns:r="http://openidm.forgerock.com/xml/ns/public/resource/resource-schema-1.xsd">groups</r:nativeAttributeName>
                                    </xsd:appinfo>
                                </xsd:annotation>
                            </xsd:element>
                            <xsd:element minOccurs="0" name="custom" type="xsd:string">
                                <xsd:annotation>
                                    <xsd:appinfo>
                                        <r:attributeFlag xmlns:r="http://openidm.forgerock.com/xml/ns/public/resource/resource-schema-1.xsd">IGNORE_ATTRIBUTE</r:attributeFlag>
                                        <r:help xmlns:r="http://openidm.forgerock.com/xml/ns/public/resource/resource-schema-1.xsd">This attribute part of the SchemaHandling</r:help>
                                        <r:nativeAttributeName xmlns:r="http://openidm.forgerock.com/xml/ns/public/resource/resource-schema-1.xsd">custom</r:nativeAttributeName>
                                    </xsd:appinfo>
                                </xsd:annotation>
                            </xsd:element>
                            <xsd:element ref="xns1:__UID__">
                                <xsd:annotation>
                                    <xsd:appinfo>
                                        <r:attributeFlag xmlns:r="http://openidm.forgerock.com/xml/ns/public/resource/resource-schema-1.xsd">NOT_UPDATEABLE</r:attributeFlag>
                                        <r:nativeAttributeName xmlns:r="http://openidm.forgerock.com/xml/ns/public/resource/resource-schema-1.xsd">__UID__</r:nativeAttributeName>
                                    </xsd:appinfo>
                                </xsd:annotation>
                            </xsd:element>
                            <xsd:element minOccurs="0" name="givenName" type="xsd:string">
                                <xsd:annotation>
                                    <xsd:appinfo>
                                        <r:nativeAttributeName xmlns:r="http://openidm.forgerock.com/xml/ns/public/resource/resource-schema-1.xsd">givenName</r:nativeAttributeName>
                                    </xsd:appinfo>
                                </xsd:annotation>
                            </xsd:element>
                            <xsd:element minOccurs="0" name="fullName" type="xsd:string">
                                <xsd:annotation>
                                    <xsd:appinfo>
                                        <r:help xmlns:r="http://openidm.forgerock.com/xml/ns/public/resource/resource-schema-1.xsd">DISPLAY_NAME_HELP_KEY</r:help>
                                        <r:nativeAttributeName xmlns:r="http://openidm.forgerock.com/xml/ns/public/resource/resource-schema-1.xsd">fullName</r:nativeAttributeName>
                                    </xsd:appinfo>
                                </xsd:annotation>
                            </xsd:element>
                        </xsd:sequence>
                    </xsd:extension>
                </xsd:complexContent>
            </xsd:complexType>
            <xsd:complexType name="Group">
                <xsd:annotation>
                    <xsd:appinfo>
                        <r:identifier xmlns:r="http://openidm.forgerock.com/xml/ns/public/resource/resource-schema-1.xsd" ref="xns1:__UID__"/>
                        <r:secondaryIdentifier xmlns:r="http://openidm.forgerock.com/xml/ns/public/resource/resource-schema-1.xsd" ref="xns1:__NAME__"/>
                        <r:displayName xmlns:r="http://openidm.forgerock.com/xml/ns/public/resource/resource-schema-1.xsd" ref="xns0:description"/>
                        <r:descriptionAttribute xmlns:r="http://openidm.forgerock.com/xml/ns/public/resource/resource-schema-1.xsd" ref="xns0:description"/>
                        <r:nativeObjectClass xmlns:r="http://openidm.forgerock.com/xml/ns/public/resource/resource-schema-1.xsd">__GROUP__</r:nativeObjectClass>
                        <r:container xmlns:r="http://openidm.forgerock.com/xml/ns/public/resource/resource-schema-1.xsd">true</r:container>
                    </xsd:appinfo>
                </xsd:annotation>
                <xsd:complexContent>
                    <xsd:extension base="r:ResourceObjectClass" xmlns:r="http://openidm.forgerock.com/xml/ns/public/resource/resource-schema-1.xsd">
                        <xsd:sequence>
                            <xsd:element ref="xns1:__NAME__">
                                <xsd:annotation>
                                    <xsd:appinfo>
                                        <r:nativeAttributeName xmlns:r="http://openidm.forgerock.com/xml/ns/public/resource/resource-schema-1.xsd">__NAME__</r:nativeAttributeName>
                                    </xsd:appinfo>
                                </xsd:annotation>
                            </xsd:element>
                            <xsd:element minOccurs="0" name="description" type="xsd:string">
                                <xsd:annotation>
                                    <xsd:appinfo>
                                        <r:help xmlns:r="http://openidm.forgerock.com/xml/ns/public/resource/resource-schema-1.xsd">DESCRIPTION_NAME_HELP_KEY</r:help>
                                        <r:nativeAttributeName xmlns:r="http://openidm.forgerock.com/xml/ns/public/resource/resource-schema-1.xsd">description</r:nativeAttributeName>
                                    </xsd:appinfo>
                                </xsd:annotation>
                            </xsd:element>
                            <xsd:element ref="xns1:__UID__">
                                <xsd:annotation>
                                    <xsd:appinfo>
                                        <r:attributeFlag xmlns:r="http://openidm.forgerock.com/xml/ns/public/resource/resource-schema-1.xsd">NOT_UPDATEABLE</r:attributeFlag>
                                        <r:nativeAttributeName xmlns:r="http://openidm.forgerock.com/xml/ns/public/resource/resource-schema-1.xsd">__UID__</r:nativeAttributeName>
                                    </xsd:appinfo>
                                </xsd:annotation>
                            </xsd:element>
                        </xsd:sequence>
                    </xsd:extension>
                </xsd:complexContent>
            </xsd:complexType>
        </xsd:schema>
    </c:schema>
    <c:schemaHandling>
        <c:accountType default="true">

                <!-- Readable name for the account type -->
            <c:name>Default Account</c:name>

                <!-- Reference to the Resoure Schema (see above) specifying
                     object class for this account type -->
            <i:objectClass>ri:Account</i:objectClass>
            
            <i:credentials>
                <i:outboundPassword>true</i:outboundPassword>
                <i:randomPasswordLength>4</i:randomPasswordLength>
            </i:credentials>
        </c:accountType>
    </c:schemaHandling>
            <!--
            Synchronization section describes the synchronization policy, timing,
            reactions and similar synchronization settings.
        -->
    <i:synchronization>
        <i:enabled>true</i:enabled>

            <!-- As we use only the "confirmed" situation there, correlation and
                 confirmation is not needed -->

            <!-- Following section describes reactions to a situations.
                 We use only "confirmed" situation, therefore the password change
                 will only be applied to user that is an owner of the account
                 that triggered the password change. Other password changes
                 will be ignored.
             -->
        <i:reaction>
            <i:situation>confirmed</i:situation>
            <i:action ref="http://openidm.forgerock.com/xml/ns/public/model/action-1#modifyPassword"/>
        </i:reaction>

	<!-- Correlation expression.
                 It will be used to find appropriate user entry for an account.
        -->
        <i:correlation> <!-- Correlation rule is a search query -->
            <!-- The clause <c:type uri="http://openidm.forgerock.com/xml/ns/public/common/common-1.xsd#UserType"/> is implicit in correlation rules -->
                <!-- Following search queury will look for users that have "name"
                     equal to the "uid" attribute of the account. Simply speaking,
                     it will look for match in usernames in the IDM and the resource. -->
            <c:equal>
                <c:path>.</c:path>
                <c:valueExpression ref="c:name">
                        declare namespace i="http://openidm.forgerock.com/xml/ns/public/common/common-1.xsd";
                        declare namespace dj="http://openidm.forgerock.com/xml/ns/samples/localhostOpenDJ";
                        $i:account/i:attributes/dj:uid
                </c:valueExpression>
            </c:equal>
        </i:correlation>

    </i:synchronization>

</c:object>