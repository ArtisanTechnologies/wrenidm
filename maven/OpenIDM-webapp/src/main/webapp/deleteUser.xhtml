<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<ui:composition template="resources/templates/admin-template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ice="http://www.icesoft.com/icefaces/component"
                xmlns:prefs="http://java.sun.com/jsf/composite/components/preferences"
                xmlns:user="http://java.sun.com/jsf/composite/components/user"
                xmlns:idm="http://openidm.forgerock.com/xml/ns/custom-taglib/">

    <ui:define name="title">#{lang.messages['user.type.delete.title']}</ui:define>
    <ui:define name="content-title">#{lang.messages['user.type.delete.title']}</ui:define>

    <ui:define name="admin-content">
        <ice:form id="admin-content">
            <ice:panelPopup modal="true" autoCentre="true" visible="#{userTypeController.showPopup}">
                <f:facet name="header">
                    <ice:outputText value="Confirm delete" />
                </f:facet>
                <f:facet name="body">
                    <ice:outputText value="Do you really want to delete selected users?" />
                    <br />
                    <ice:commandButton value="Yes" action="#{userTypeController.deleteUsers}" />
                    <ice:commandButton value="No" action="#{userTypeController.hideConfirmDelete}"/>
                </f:facet>
            </ice:panelPopup>
            <ice:panelGrid>
                <ice:panelGroup styleClass="buttonsPosition">
                    <ice:panelGrid columns="3" styleClass="searchOidPosition">
                        <ice:outputText value="#{msg['user.type.userID']}"/>
                        <ice:inputText value="#{userTypeController.searchOid}" immediate="true"/>
                        <idm:button actionListener="#{userTypeController.searchUser}"
                                    value="#{msg['user.type.search.button']}" id="searchButton"
                                    img="/resources/images/magnifier.png" />
                    </ice:panelGrid>
                </ice:panelGroup>

                <f:facet name="header">
                    <h:messages errorClass="error" infoClass="info" globalOnly="true" layout="table" />
                </f:facet>
                <ice:commandButton id="deleteAllUsers" type="submit" value="#{msg['user.type.deleteAll.button']}" action="#{userTypeController.selectAll}"/>
                <ice:dataTable id="userTable"
                               rows="10"
                               value="#{userTypeController.userData}"
                               var="user"
                               sortColumn="#{userTypeController.sortColumnName}"
                               sortAscending="#{userTypeController.ascending}"
                               columnClasses="iceDatTblCol1"
                               rowClasses="iceDatTblRow1 iceDatTblRow2"
                               columnWidths="auto, 230px, 100px, 100px, 170px, 100px, 100px, 150px">
                    <ice:column>
                        <ice:selectBooleanCheckbox id="deleteCheckbox"
                                                   value="#{user.selected}"/>
                    </ice:column>
                    <ice:column>
                        <f:facet name="header">
                            <ice:outputText id="userOid" value="#{msg['user.type.oid']}"/>
                        </f:facet>
                        <ice:outputText id="oid"
                                        value="#{user.oid}"/>
                    </ice:column>
                    <ice:column>
                        <f:facet name="header">
                            <ice:outputText id="userGivenName" value="#{msg['user.type.givenName']}"/>
                        </f:facet>
                        <ice:outputText id="givenName" value="#{user.givenName}"/>
                    </ice:column>
                    <ice:column>
                        <f:facet name="header">
                            <ice:outputText id="userFamilyName" value="#{msg['user.type.familyName']}"/>
                        </f:facet>
                        <ice:outputText id="familyName" value="#{user.familyName}"/>
                    </ice:column>
                    <ice:column>
                        <f:facet name="header">
                            <ice:outputText id="userFullName" value="#{msg['user.type.fullName']}"/>
                        </f:facet>
                        <ice:outputText  id="fullName" value="#{user.fullName}"/>
                    </ice:column>
                    <ice:column>
                        <f:facet name="header">
                            <ice:outputText id="userName" value="#{msg['user.type.name']}"/>
                        </f:facet>
                        <ice:outputText id="name"
                                        value="#{user.name}"/>
                    </ice:column>
                    <ice:column>
                        <f:facet name="header">
                            <ice:commandSortHeader columnName="telNumber"
                                                   arrow="true"
                                                   actionListener="#{userTypeController.sortItem}">
                                <ice:outputText id="userTelNumber" value="#{msg['user.type.telNumber']}"/>
                            </ice:commandSortHeader>
                        </f:facet>
                        <ice:outputText id="telNumber"/>
                    </ice:column>
                    <ice:column>
                        <f:facet name="header">
                            <ice:commandSortHeader columnName="email"
                                                   arrow="true"
                                                   actionListener="#{userTypeController.sortItem}">
                                <ice:outputText id="userEmail" value="#{msg['user.type.email']}"/>
                            </ice:commandSortHeader>
                        </f:facet>
                        <ice:outputText id="email"/>
                    </ice:column>
                </ice:dataTable>
                <ice:panelGroup>
                    <center>
                        <ice:dataPaginator for="userTable" paginator="true">
                            <f:facet name="first">
                                <ice:graphicImage url="resources/css/forgerock/css-images/arrow-first.gif"/>
                            </f:facet>
                            <f:facet name="last">
                                <ice:graphicImage url="resources/css/forgerock/css-images/arrow-last.gif"/>
                            </f:facet>
                            <f:facet name="previous">
                                <ice:graphicImage url="resources/css/forgerock/css-images/arrow-previous.gif"/>
                            </f:facet>
                            <f:facet name="next">
                                <ice:graphicImage url="resources/css/forgerock/css-images/arrow-next.gif"/>
                            </f:facet>
                        </ice:dataPaginator>
                    </center>
                </ice:panelGroup>
                <ice:panelGroup style="display:block; ">
                    <ice:commandButton id="deleteUser" type="submit" value="#{msg['user.type.delete.button']}" action="#{userTypeController.showConfirmDelete}"/>
                </ice:panelGroup>
            </ice:panelGrid>
        </ice:form>
    </ui:define>

</ui:composition>